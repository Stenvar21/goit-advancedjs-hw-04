{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const fetchPhotosByQuery = query => {\n  const fetchParams = new URLSearchParams({\n    key: '53074697-31effdba198fed340456f0d43',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 21,\n  });\n\n  return fetch(`https://pixabay.com/api/?${fetchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      return response.json();\n    });\n};\n","export const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"js-gallery-link\" href=\"${imgInfo.largeImageURL}\">\n        <img \n          class=\"gallery-img\" \n          src=\"${imgInfo.webformatURL}\" \n          alt=\"${imgInfo.tags}\" \n          loading=\"lazy\"\n        />\n      </a>\n      <div class=\"stats-container\">\n        <div class=\"stat\">\n          <span class=\"label\">Likes</span>\n          <span class=\"value\">${imgInfo.likes}</span>\n        </div>\n        <div class=\"stat\">\n          <span class=\"label\">Views</span>\n          <span class=\"value\">${imgInfo.views}</span>\n        </div>\n        <div class=\"stat\">\n          <span class=\"label\">Comments</span>\n          <span class=\"value\">${imgInfo.comments}</span>\n        </div>\n        <div class=\"stat\">\n          <span class=\"label\">Downloads</span>\n          <span class=\"value\">${imgInfo.downloads}</span>\n        </div>\n      </div>\n    </li>\n  `;\n};\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPhotosByQuery } from \"./js/pixabay-api.js\";\nimport { createGalleryCardTemplate } from \"./js/render-functions.js\";\n\nconst refs = {\n  form: document.querySelector(\".js-search-form\"),\n  gallery: document.querySelector(\".js-gallery\"),\n  loader: document.querySelector(\".js-loader\"),\n};\n\nlet lightbox = null;\n\nfunction showLoader(message = \"Loading images, please wait...\") {\n  refs.loader.classList.add(\"is-active\");\n  refs.loader.textContent = message;\n}\nfunction hideLoader() {\n  refs.loader.classList.remove(\"is-active\");\n  refs.loader.textContent = \"\";\n}\n\nfunction initOrRefreshLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".js-gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const query = event.currentTarget.elements.user_query.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Search query cannot be empty!\",\n      position: \"topCenter\",\n      timeout: 2000,\n    });\n    return;\n  }\n\n  refs.gallery.innerHTML = \"\";\n  showLoader();\n\n  try {\n    const data = await fetchPhotosByQuery(query);\n\n    const hits = Array.isArray(data.hits) ? data.hits : [];\n\n    if (hits.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message:\n          \"Sorry, there are no images matching your search query. Please, try again!\",\n        position: \"topCenter\",\n        timeout: 3500,\n      });\n      return;\n    }\n\n    const markup = hits.map(item => createGalleryCardTemplate(item)).join(\"\");\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    initOrRefreshLightbox();\n  } catch (err) {\n    console.error(\"Fetch error:\", err);\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Please, try again later.\",\n      position: \"topCenter\",\n      timeout: 3500,\n    });\n  } finally {\n    hideLoader();\n    refs.form.reset();\n  }\n}\n\nrefs.form.addEventListener(\"submit\", onSearchFormSubmit);\n"],"names":["fetchPhotosByQuery","query","fetchParams","response","createGalleryCardTemplate","imgInfo","refs","lightbox","showLoader","message","hideLoader","initOrRefreshLightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","data","hits","markup","item","err"],"mappings":"6vBAAO,MAAMA,EAAqBC,GAAS,CACzC,MAAMC,EAAc,IAAI,gBAAgB,CACtC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACd,CAAG,EAED,OAAO,MAAM,4BAA4BC,CAAW,EAAE,EACnD,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,MACtB,CAAK,CACL,ECjBaC,EAA4BC,GAChC;AAAA;AAAA,yCAEgCA,EAAQ,aAAa;AAAA;AAAA;AAAA,iBAG7CA,EAAQ,YAAY;AAAA,iBACpBA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAOGA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,gCAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,ICjB3CC,EAAO,CACX,KAAM,SAAS,cAAc,iBAAiB,EAC9C,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEA,IAAIC,EAAW,KAEf,SAASC,EAAWC,EAAU,iCAAkC,CAC9DH,EAAK,OAAO,UAAU,IAAI,WAAW,EACrCA,EAAK,OAAO,YAAcG,CAC5B,CACA,SAASC,GAAa,CACpBJ,EAAK,OAAO,UAAU,OAAO,WAAW,EACxCA,EAAK,OAAO,YAAc,EAC5B,CAEA,SAASK,GAAwB,CAC1BJ,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIK,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEA,eAAeC,EAAmBC,EAAO,CACvCA,EAAM,eAAc,EAEpB,MAAMb,EAAQa,EAAM,cAAc,SAAS,WAAW,MAAM,OAE5D,GAAI,CAACb,EAAO,CACVc,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACT,SAAU,YACV,QAAS,GACf,CAAK,EACD,MACD,CAEDT,EAAK,QAAQ,UAAY,GACzBE,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAMhB,EAAmBC,CAAK,EAErCgB,EAAO,MAAM,QAAQD,EAAK,IAAI,EAAIA,EAAK,KAAO,GAEpD,GAAIC,EAAK,SAAW,EAAG,CACrBF,EAAS,MAAM,CACb,MAAO,QACP,QACE,4EACF,SAAU,YACV,QAAS,IACjB,CAAO,EACD,MACD,CAED,MAAMG,EAASD,EAAK,IAAIE,GAAQf,EAA0Be,CAAI,CAAC,EAAE,KAAK,EAAE,EACxEb,EAAK,QAAQ,mBAAmB,YAAaY,CAAM,EAEnDP,GACD,OAAQS,EAAK,CACZ,QAAQ,MAAM,eAAgBA,CAAG,EACjCL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACT,SAAU,YACV,QAAS,IACf,CAAK,CACL,QAAY,CACRL,IACAJ,EAAK,KAAK,OACX,CACH,CAEAA,EAAK,KAAK,iBAAiB,SAAUO,CAAkB"}